---
{"dg-publish":true,"permalink":"/5-digital-garden/published/papers/paper-review/a-20-ppm-50-c-105-c-1-a-32-768-k-hz-clock-generator-with-a-system-hfxo-assisted-background-calibration/","tags":["HFXO","SXDO","trimming_free","background_calibration","RTC","RTC_calibration"],"created":"2025-10-08T12:23:58.478+09:00"}
---

--- 
- Motivation & Thought: 
	- 첨언/특이한 점/추가로 찾아볼 점:
		- 온도 변화로 인한 RxO output freq. 변화를 따로 보상해주지 않았음. => 어차피 ~0.9초마다 주기적으로 re-calinbration하기에 온도 보상이 별도로 필요하지 않음
		- <mark style="background: #ADCCFFA6;">Q) calibration duty를 결정하는 명확한 기준이 있을까?</mark>
			- 해당 work에서는 ~0.9s마다 한번씩 calibration 해준다는데, 이건 그냥 duty를 고려하였을 때 average current를 1uA로 맞추기 위해서 결정한 값이라는 생각이 든다... 
			- => 최선으로 문제를 해결하는 방식이 아니라는 생각이 듦...
- Summary: 
	- <mark style="background: #FFB86CA6;">하고자 한 바 (1문장으로)</mark>
		- duty-cycled HFXO를 이용하여 RxO를 주기적으로 calibration함으로써 low-power high accuracy를 챙기자.
	- <mark style="background: #FFB86CA6;">왜 쓰여진 논문인가.</mark>
		- Target Application/문제 상황: 
			- IoT device에는 timer or time-stamp 목적으로 kHz range clock을 필요로 한다. 하지만, 
				- 1. extra crystal을 사용하는 것은 cost 손해
				- 2. HFXO에 divider를 같이 이용하면, 항상 HFXO가 켜져있어야 하기에 power 손해
				- 3. On-chip oscillator는 frequnecy stability가 나쁘고 PVT sensitive하기에 필요 조건을 만족하기 힘듦
				- 4. MEMS clock gen.은 MEMS resonator 뿐만 아니라 temperature trimming도 필요로 하기에 cost 손해
	- <mark style="background: #FFB86CA6;">어떻게 해결했지.</mark>
		- Main Idea/제안점: 
			- on-chip 32.768kHz clock을 HFXO w/ low-duty-cycle operation하게 하여 background cal.
				- => MHz XTAL의 정확도를 power-penalty 없이 얻을 수 있음
			- 구조 
				- RxO + frac. N PLL + calibration module + HFXO
				- RxO 자체만으로 32.768kHz를 정확하게 맞추지 않고, 더 높은 주파수를 만들고 이를 1/P(1/8로 구현됨)으로 나눠서 32.768kHz를 만듬
					- 1/8 Post divider => 높은 RxO 동작주파수 덕분에 LF의 크기가 작아도 괜찮음
				- RxO는 ISSCC'2013 D. Griffith의 구조로 구현
			- 비교
				- $M/f_{osc}$의 time window 동안 k개의 $f_{MHz}$를 counting => $k/f_{MHz}=M/f_{osc}$
				- 미리 계산해둔 reference 값인 $k_{32k}$와 $k$를 비교하여 freq. error를 얻음
			- 저온/고온 보상
				- <-30°C & >85°C 에서는 XTAL 자체가 variation이 커짐. => 2bit 온도 센서로 온도 범위를 rough하게 나눔.
				- 온도 범위가 바뀌면 FEE (freq. error estimator)에 mapping table에 저장해둔 온도 보정값을 넣어줌 
				- Temperature Sensor (TS)는 BJT + two hysteresis comparator로 구성됨
			- 
	- <mark style="background: #FFB86CA6;">해결 결과는.</mark>
		- 좋아진 점/수치적으로:
			- key-parameters:
				- HFXO: 32.768MHz 
				- RTC: 32.768kHz
				- Background calibration => once per ~0.9s & calibration에 10ms 소모
					- HFXO cal.에 31.5uA (56.7uW) 소모
		- Trade-off: 

Circuit:
- ![Pasted image 20251008124659.png](/img/user/0.%20TOOLS/00.%20Attechments/Pasted%20image%2020251008124659.png)
	- 

- ![Pasted image 20251008125812.png](/img/user/0.%20TOOLS/00.%20Attechments/Pasted%20image%2020251008125812.png)

- ![Pasted image 20251008130606.png](/img/user/0.%20TOOLS/00.%20Attechments/Pasted%20image%2020251008130606.png) 
- ![Pasted image 20251008130649.png](/img/user/0.%20TOOLS/00.%20Attechments/Pasted%20image%2020251008130649.png)


---
